---
title: "Esquisse Data Visualization Lab - Key"
output: html_document
---

First, make sure you install and load the `esquisse` package using `install.packages` and `library`:

```{r, eval = FALSE}
install.packages("esquisse")
install.packages("ggplot2")
```

```{r, comment = FALSE}
library(esquisse)
library(ggplot2)
library(dplyr)
library(dasehr)
```

### 1.1

Try creating a plot in `esquisse` using the `calenviroscreen` data from the `dasehr` packaged. This dataset has a lot of variables, so first run the below code to subset it so that you're only working with these variables: `CES4.0Percentile`,  `Asthma`, and `ChildrenPercLess10`. We will also categorize `CES4.0Percentile` into three categories (high, middle, and low) to make visualization a little easier!

```{r}
ces_sub <- select(calenviroscreen, c("CES4.0Percentile", "Asthma", "ChildrenPercLess10"))

ces_sub <- ces_sub %>% 
            mutate(CES4.0Perc_cat = 
              case_when(CES4.0Percentile > 75  ~ "High", 
                        CES4.0Percentile <= 75 & CES4.0Percentile >25 ~ "Middle",
                        CES4.0Percentile <= 25 ~ "Low"))
```

-   Drag and drop the `ChildrenPercLess10` variable to be plotted on the x-axis.
-   Drag and drop the `Asthma` variable to be plotted on the y-axis.
-   What happens when you drag `CES4.0Perc_cat` to the facet region of the esquisse GUI?
-   What happens if you move this to color?
-   Copy and paste the code from both options into the chunk below:

```{r 1.1response}
# esquisser(ces_sub)
ggplot(ces_sub) +
  aes(x = ChildrenPercLess10, y = Asthma) +
  geom_point(shape = "circle", size = 1.5, colour = "#112446") +
  theme_minimal() +
  facet_wrap(vars(CES4.0Perc_cat))

ggplot(ces_sub) +
  aes(x = ChildrenPercLess10, y = Asthma, colour = CES4.0Perc_cat) +
  geom_point(shape = "circle", size = 1.5) +
  scale_color_hue(direction = 1) +
  theme_minimal()
```

### 1.2

Click where it says "point" (may say "auto" depending on how you did the last question) on the far left side and change the plot to a different type of plot. Copy and paste the code into the chunk below. Close Esquisse and run the chunk below to generate a ggplot.

```{r 1.2response}
ggplot(ces_sub) +
  aes(x = ChildrenPercLess10, y = Asthma, colour = CES4.0Perc_cat) +
  geom_line(size = 0.5) +
  scale_color_hue(direction = 1) +
  theme_minimal()
```


# Practice on Your Own!

### P.1

Launch Esquisse on any selection of the following datasets we have worked with before and explore!

```{r}
co2 <- read_csv("https://daseh.org/data/Yearly_CO2_Emissions_1000_tonnes.csv")

cc <- read_csv("https://daseh.org/data/Yearly_CC_Disasters.csv")

nitrate <- read_csv(file = "https://daseh.org/data/Nitrate_Exposure_for_WA_Public_Water_Systems_byquarter_data.csv")

```

```{r P.1response}
# esquisser(nitrate)
```
